<!DOCTYPE html>
<html>
<head>
    <title>Module Test Results</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-result { 
            background: white; 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .working { border-left: 5px solid #4caf50; }
        .broken { border-left: 5px solid #f44336; }
        .test-btn { 
            background: #2196f3; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        .summary { 
            background: #e3f2fd; 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center; 
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="summary">
        <h1>SamLang Niger Module Test</h1>
        <p>Testing all modules to verify they work properly</p>
        <button class="test-btn" onclick="testAll()">Test All Modules</button>
    </div>
    
    <div id="results"></div>
    
    <script>
        async function testModule(num) {
            try {
                const response = await fetch(`/module/${num}`);
                const html = await response.text();
                
                const hasTitle = html.includes(`Module ${num}`);
                const hasContent = html.length > 500;
                const isWorking = hasTitle && hasContent;
                
                return {
                    module: num,
                    status: response.status,
                    working: isWorking,
                    hasTitle,
                    hasContent,
                    contentLength: html.length
                };
            } catch (error) {
                return {
                    module: num,
                    status: 'ERROR',
                    working: false,
                    error: error.message
                };
            }
        }
        
        function displayResult(result) {
            const resultsDiv = document.getElementById('results');
            const statusClass = result.working ? 'working' : 'broken';
            const statusText = result.working ? 'WORKING ✓' : 'BROKEN ✗';
            
            resultsDiv.innerHTML += `
                <div class="test-result ${statusClass}">
                    <h3>Module ${result.module}: ${statusText}</h3>
                    <p><strong>HTTP Status:</strong> ${result.status}</p>
                    <p><strong>Has Title:</strong> ${result.hasTitle ? 'Yes' : 'No'}</p>
                    <p><strong>Has Content:</strong> ${result.hasContent ? 'Yes' : 'No'}</p>
                    <p><strong>Content Length:</strong> ${result.contentLength} characters</p>
                    ${result.error ? `<p><strong>Error:</strong> ${result.error}</p>` : ''}
                    <button class="test-btn" onclick="window.open('/module/${result.module}', '_blank')">
                        Open Module ${result.module}
                    </button>
                </div>
            `;
        }
        
        async function testAll() {
            document.getElementById('results').innerHTML = '<h2>Testing modules...</h2>';
            
            for (let i = 1; i <= 5; i++) {
                const result = await testModule(i);
                displayResult(result);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }
        
        // Auto-run test
        window.addEventListener('load', () => {
            setTimeout(testAll, 1000);
        });
    </script>
</body>
</html>